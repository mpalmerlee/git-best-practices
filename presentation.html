---
layout: presentation
title: Git Best Practices Presentation
permalink: /presentation/
---
name: inverse
layout: true
class: inverse
---
template: inverse

# Git Point Break

--

<img src="{{ site.baseurl }}/img/pb-0.jpg" alt="Point Break Poster" style="width: 200px;float: left; margin: 4px 10px 0px 0px;"/>
**Starring Patrick Swayze and Keanu Reeves**
<br clear="all" />
--

How to prevent anarchy within your Git history while allowing the FBI agents and Surfers to live in harmony

---

# Agenda

<img src="https://briantissot.files.wordpress.com/2016/04/point-break-movie-2015-ozaki-eight.jpg?w=640" alt="Point Break Wave" style=""/>
--

1. Who cares Dude?
--


2. The Surfer's code
--


3. The F.B.I. handbook
--


4. How we can all live in harmony at Bells Beach

---

# Who cares about a clean history Dude!?!

<img src="https://i.imgflip.com/211tuj.jpg" title="my commit messages all say wip" style="width: 400px;"/>

---

# Nobody, as long as you never have to use it


<img src="{{ site.baseurl }}/img/pb-1.jpg" alt="Why should I care?" style="width: 500px;float: left; margin: 4px 10px 0px 0px;"/>
> All my changes get into master no matter how I like to work with Git, so why should I care? What's useful about the log anyways?
<br clear="all" />

--

- Easily find out what happened and why
--

- Cherry-Pick a feature or bug-fix across branches
--

- Revert a change when something goes wrong

---

# A clean master branch
<img src="{{ site.baseurl }}/img/clean-history.png" alt="clean history" />
--

<img src="https://uproxx.files.wordpress.com/2015/06/point-break.gif" title="riding the pipe"/>

Makes things peaceful and easy

---
# Merging between branches causes clutter

<img src="{{ site.baseurl }}/img/history-with-merge-commits.png" alt="history with merge commits" style="width: 500px;float: left; margin: 4px 10px 0px 0px;"/>

---
# Avoid the 'Rockband' Graph

<img src="{{ site.baseurl }}/img/merge-graph.png" alt="merge graph" style="width: 50px;float: left; margin: 4px 10px 0px 0px;"/>
<img src="{{ site.baseurl }}/img/merge-graph-2.png" alt="merge graph" style="width: 50px;float: left; margin: 4px 10px 0px 0px;"/>

<br clear="all" />
<img src="https://i.imgflip.com/211u9v.jpg" title="we love merge commits"/>

---

# Bodhi's guide to keeping the history clean
<img src="{{ site.baseurl }}/img/pb-2.jpg" alt="squash and merge" style="width: 200px;"/>

--

- Each commit should represent a logical and functional set of changes
--

- _Usually_ this also means one commit per feature branch and pull request
--

- Avoid merge commits in master since they don't contain useful information and just add noise
---

# The Surfer's code

<img src="https://i.imgflip.com/211uxd.jpg" title="rebasing is the source man" style="width: 300px;" style="float: left; margin: 4px 10px 0px 0px;"/>
Bodhi keeps his feature branch as clean as possible (he also wants people to think he writes perfect code the first time)

--

Keep one commit on your branch while rebasing with master:

```bash
git commit --amend -a
```

or

```bash
git reset HEAD~1
```

--

and then:

```bash
git rebase origin master
git push --force-with-lease
```

---
# Whoah! Did you just force push? 

<img src="https://www.the-fanboy-perspective.com/uploads/1/7/3/8/17382151/9571402_orig.gif" alt="I know man isn't it wild!" style="margin: 4px 10px 0px 0px;"/>
--

### On our feature branch it's _usually_ fine, but we use `--force-with-lease` instead of `-f` just to be safe

---
# The F.B.I. handbook

<img src="https://media.giphy.com/media/RyyThwc9bNneU/200.gif" alt="I am an F.B.I. Agent!" style="float: left; margin: 4px 10px 0px 0px;"/>
According to the F.B.I. handbook agents should commit early and often, preserve the history on their branch and clean things up before merging with master
<br clear="all" />
--
An alternate method: Squash and merge

<img src="{{ site.baseurl }}/img/pr-merge-options.png" alt="merge options" style="width: 300px;float: left;"/>
--

<img src="{{ site.baseurl }}/img/squash-and-merge.png" alt="squash and merge" style="width: 300px;"/>
---
# Bodhi likes the command line

<img src="https://i.imgflip.com/212njr.jpg" title="terminal plz" style="width: 200px;float: left; margin: 4px 10px 0px 0px;"/>
```bash
git checkout master
git merge --squash feature-branch
git commit
```

or

```bash
git rebase -i HEAD~2
```

---
# How we can all live in harmony at Bells Beach
<img src="http://ih.constantcontact.com/fs105/1101453036284/img/969.jpg?a=1115623279578" title="bells beach" style="width: 200px;" />

### We can enforce these policies through GitHub
<br clear="all" />
--

<img src="{{ site.baseurl }}/img/settings-merge-button.png" alt="settings - merge button" style="width: 200px;float: left; margin: 4px 10px 0px 0px;"/>
* Simply change the available options in the GitHub project settings / merge button *
<br clear="all" />
--

- Most of the time use *Squash and merge*
--

- When you want to keep your commits intact use *Rebase and merge*

---
# Summary

<img src="{{ site.baseurl }}/img/pb-3.jpg" alt="point break harmony" style="width: 200px; margin: 4px 10px 0px 0px;"/>

- Avoid merge commits:
Merge with --ff-only option to 
`git merge master --ff-only`

`fatal: Not possible to fast-forward, aborting.`
--

- Merge into master as soon as possible (small prs)
--

- Rebase as often as possible
--

- Commit messages are for future you, not present you

---
# Appendix / Reference

> “Git gets better with good habits” - A wise man

> “Silly robot, Git is for humans” - Another wise man

[Flight Rules for Git](https://github.com/k88hudson/git-flight-rules)

